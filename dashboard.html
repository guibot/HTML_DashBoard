<!doctype html>
<html lang="pt-PT">
<head>
<meta charset="utf-8">
<title>Dashboard</title>
<meta name="viewport" content="width=1920, height=1080, initial-scale=1">

<style>
:root { color-scheme: dark; }
html, body {
  margin: 0; height: 100%;
  background: #0b0d10; color: #e6e6e6;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  overflow: hidden;
}

/* TOPO */
nav {
  height: 56px;
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 0 20px;
  background: #0f131a;
  border-bottom: 1px solid #1b2230;
}
nav button {
  background: none;
  border: 1px solid #1b2230;
  color: #e6e6e6;
  padding: 8px 14px;
  border-radius: 999px;
  cursor: pointer;
}
nav button.active {
  background: #1b2230;
}

/* PÁGINAS */
.page {
  display: none;
  height: calc(100% - 56px);
}
.page.active { display: block; }

iframe {
  width: 100%;
  height: 100%;
  border: 0;
}

/* TEMPO */
#weather iframe { height: 100%; }

/* MERCADOS */
.markets {
  display: grid;
  grid-template-columns: 320px 1fr;
  grid-template-rows: 1fr 1fr;
  height: 100%;
}
.list {
  padding: 12px;
  border-right: 1px solid #1b2230;
}
.list h3 {
  margin: 6px 0 10px;
  font-size: 14px;
  opacity: .8;
}
.list button {
  width: 100%;
  margin-bottom: 8px;
  padding: 10px;
  background: #0f131a;
  border: 1px solid #1b2230;
  color: #e6e6e6;
  border-radius: 8px;
  cursor: pointer;
}
.chart {
  border-bottom: 1px solid #1b2230;
}

/* NOTÍCIAS */
.news {
  display: grid;
  grid-template-columns: 1fr 1fr;
  height: 100%;
}

.news iframe {
  transform: scale(1.5);
  transform-origin: top left;
  width: 87%;
  height: 87%;
}

/* NOTÍCIAS (agora em JS, dá para estilizar) */
.news {
  display: grid;
  grid-template-columns: 1fr 1fr;
  height: 100%;
  gap: 0;
}

.newsPanel{
  background: #000;
  color: #fff;
  padding: 16px;
  overflow: auto; /* scroll dentro do painel */
}

.newsPanel .feed-title,
.newsPanel .feed-desc { display: none; } /* opcional */

.newsPanel .feed-item-title a{
  color: #fff;
  text-decoration: none;
  font-size: 22px; /* aumenta aqui */
  line-height: 1.2;
}

.newsPanel .feed-item-desc{
  color: #ddd;
  font-size: 16px; /* aumenta aqui */
  line-height: 1.35;
}

#clock {
  margin-left: auto;           /* empurra para a direita */
  font-size: 18px;
  letter-spacing: 0.5px;
  opacity: 0.85;
  white-space: nowrap;
}


</style>
</head>

<body>

<nav>
  <button onclick="showPage('weather')" id="btn-weather" class="active">Tempo</button>
  <button onclick="showPage('markets')" id="btn-markets">Mercados</button>
  <button onclick="showPage('news')" id="btn-news">Notícias</button>
  <button onclick="showPage('settings')" id="btn-settings">Settings</button>

  <div id="clock"></div>

</nav>

<!-- PÁGINA 1 — TEMPO -->
<div id="weather" class="page active">
  <iframe
    src="https://embed.windy.com/embed2.html?lat=38.7223&lon=-9.1393&zoom=7&overlay=rain&product=ecmwf&metricTemp=%C2%B0C"
    loading="lazy">
  </iframe>
</div>

<!-- PÁGINA 2 — MERCADOS -->
<div id="markets" class="page">
  <div class="markets">

    <!-- LISTA ÍNDICES -->
    <div class="list">
      <h3>Índices Bolsa</h3>
      <button onclick="setMarket('AMEX:SPY')">S&P 500</button>
      <button onclick="setMarket('NASDAQ:QQQ')">Nasdaq 100</button>
      <button onclick="setMarket('AMEX:DIA')">Dow Jones</button>
      <button onclick="setMarket('LSE:ISF')">FTSE 100</button>
      <!-- <button onclick="setMarket('XETR:DAXEX')">DAX</button> -->
      <!-- <button onclick="setMarket('AMEX:URTH')">MSCI World</button> -->
    </div>

    <!-- GRÁFICO BOLSA -->
    <div class="chart">
      <iframe id="marketFrame"
        src="https://s.tradingview.com/widgetembed/?symbol=AMEX%3ASPY&interval=60&hideideas=1&theme=dark&style=1">
      </iframe>
    </div>

    <!-- LISTA CRYPTO -->
    <div class="list">
      <h3>Crypto</h3>
      <button onclick="setCrypto('BINANCE:BTCEUR')">Bitcoin</button>
      <button onclick="setCrypto('BINANCE:ETHEUR')">Ethereum</button>
      <button onclick="setCrypto('BINANCE:SOLEUR')">Solana</button>
      <button onclick="setCrypto('BINANCE:BNBEUR')">BNB</button>
      <button onclick="setCrypto('BINANCE:ADAEUR')">Cardano</button>
    </div>

    <!-- GRÁFICO CRYPTO -->
    <div>
      <iframe id="cryptoFrame"
        src="https://s.tradingview.com/widgetembed/?symbol=BINANCE%3ABTCUSDT&interval=60&hideideas=1&theme=dark&style=1">
      </iframe>
    </div>

  </div>
</div>

<!-- PÁGINA 3 — NOTÍCIAS -->
<div id="news" class="page">
  <div class="news">

    <!-- INTERNACIONAL (BBC) -->
    <div class="newsPanel">
      <script src="https://rss.bloople.net/?url=https%3A%2F%2Ffeeds.bbci.co.uk%2Fnews%2Fworld%2Frss.xml&limit=20&detail=200&type=js"></script>
    </div>

    <!-- NACIONAL (Expresso) -->
    <div class="newsPanel">
      <script src="https://rss.bloople.net/?url=https%3A%2F%2Ffeeds.feedburner.com%2Fexpresso-geral&limit=20&detail=200&type=js"></script>
    </div>

  </div>
</div>

<!-- PÁGINA 4 — SETTINGS -->
<div id="settings" class="page">
  <div style="padding:20px; max-width:460px; line-height:1.4;">

    <h2>Settings</h2>

    <h3>Weather Location (Windy)</h3>
    <p style="opacity:0.8; font-size:14px;">
      Enter the <strong>latitude</strong> and <strong>longitude</strong> of the location you want to display.
      <br>
      Example (Lisbon): <code>38.7223</code>, <code>-9.1393</code>
      <br>
      Tip: You can get coordinates from Google Maps (right-click → “What’s here?”).
    </p>

    <label>Latitude</label><br>
    <input id="lat" type="number" step="0.0001"><br><br>

    <label>Longitude</label><br>
    <input id="lon" type="number" step="0.0001"><br><br>

    <h3>Clock Time Zone</h3>
    <p style="opacity:0.8; font-size:14px;">
      Enter the time zone using the format <strong>Region/City</strong>.
      <br>
      Examples:
      <br>
      <code>Europe/Lisbon</code>,
      <code>Europe/Stockholm</code>,
      <code>America/New_York</code>
    </p>

    <label>Time Zone</label><br>
    <input id="timezone" type="text" placeholder="Europe/Lisbon"><br><br>

    <button onclick="saveSettings()">Save</button>

    <p style="margin-top:24px; font-size:13px; opacity:0.6;">
  Note: 
  <br>All settings are stored locally in your browser using <strong>localStorage</strong>.
  <br>No data is sent to any server.
</p>


  </div>
</div>




<script>
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById('btn-' + id).classList.add('active');
}

function setMarket(symbol) {
  document.getElementById('marketFrame').src =
    "https://s.tradingview.com/widgetembed/?symbol=" +
    encodeURIComponent(symbol) +
    "&interval=60&hideideas=1&theme=dark&style=1";
}

function setCrypto(symbol) {
  document.getElementById('cryptoFrame').src =
    "https://s.tradingview.com/widgetembed/?symbol=" +
    encodeURIComponent(symbol) +
    "&interval=60&hideideas=1&theme=dark&style=1";
}

function updateClock() {
  const { timezone } = loadSettings();
  const now = new Date();

  const time = now.toLocaleTimeString('en-GB', {
    hour: '2-digit',
    minute: '2-digit',
    second: '2-digit',
    timeZone: timezone
  });

  const date = now.toLocaleDateString('en-GB', {
    weekday: 'short',
    day: '2-digit',
    month: 'short',
    timeZone: timezone
  });

  document.getElementById('clock').textContent = `${date} · ${time}`;
}


updateClock();
setInterval(updateClock, 1000);


function updateWindy(lat, lon) {
  const iframe = document.querySelector('#weather iframe');

  iframe.src =
    `https://embed.windy.com/embed2.html` +
    `?lat=${lat}` +
    `&lon=${lon}` +
    `&zoom=7` +
    `&overlay=rain` +
    `&product=ecmwf` +
    `&metricTemp=%C2%B0C`;
}



const DEFAULTS = {
  lat: 38.7223,
  lon: -9.1393,
  timezone: 'Europe/Lisbon'
};

function loadSettings() {
  return {
    lat: localStorage.getItem('lat') || DEFAULTS.lat,
    lon: localStorage.getItem('lon') || DEFAULTS.lon,
    timezone: localStorage.getItem('timezone') || DEFAULTS.timezone
  };
}

function saveSettings() {
  localStorage.setItem('lat', document.getElementById('lat').value);
  localStorage.setItem('lon', document.getElementById('lon').value);
  localStorage.setItem('timezone', document.getElementById('timezone').value);
  applySettings();
  alert('Saved');
}


function applySettings() {
  const s = loadSettings();

  updateWindy(s.lat, s.lon);

  document.getElementById('lat').value = s.lat;
  document.getElementById('lon').value = s.lon;
  document.getElementById('timezone').value = s.timezone;
}

applySettings();
setInterval(updateClock, 1000);

</script>

</body>
</html>
